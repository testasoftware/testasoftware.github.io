<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.e53586a225ffdde20c86.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style><meta name="generator" content="Gatsby 3.14.6"/><title data-react-helmet="true">Web Application Primer in Haskell - Web Framework | Testa Software</title><meta data-react-helmet="true" name="description" content="The personal and professional home of Steve Testa."/><meta data-react-helmet="true" property="og:title" content="Web Application Primer in Haskell - Web Framework"/><meta data-react-helmet="true" property="og:description" content="The personal and professional home of Steve Testa."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@stesta"/><meta data-react-helmet="true" name="twitter:title" content="Web Application Primer in Haskell - Web Framework"/><meta data-react-helmet="true" name="twitter:description" content="The personal and professional home of Steve Testa."/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="/favicon-32x32.png?v=8704c9db0cbb3a15ccc9b40440bf50bc" type="image/png"/><link rel="icon" href="/favicon.svg?v=8704c9db0cbb3a15ccc9b40440bf50bc" type="image/svg+xml"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=8704c9db0cbb3a15ccc9b40440bf50bc"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=8704c9db0cbb3a15ccc9b40440bf50bc"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=8704c9db0cbb3a15ccc9b40440bf50bc"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=8704c9db0cbb3a15ccc9b40440bf50bc"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=8704c9db0cbb3a15ccc9b40440bf50bc"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=8704c9db0cbb3a15ccc9b40440bf50bc"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=8704c9db0cbb3a15ccc9b40440bf50bc"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=8704c9db0cbb3a15ccc9b40440bf50bc"/><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"/><link href="/assets/css/nucleo-icons.css" rel="stylesheet"/><link href="/assets/css/nucleo-svg.css" rel="stylesheet"/><script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script><link id="pagestyle" href="/assets/css/soft-design-system-pro.css?v=1.0.8" rel="stylesheet"/><link as="script" rel="preload" href="/webpack-runtime-27cf0a40f8417dc113b4.js"/><link as="script" rel="preload" href="/framework-8cd75372ec3f541c8f95.js"/><link as="script" rel="preload" href="/app-f6dc7fc2ed935f7049e2.js"/><link as="script" rel="preload" href="/commons-ebc20530bca262809144.js"/><link as="script" rel="preload" href="/component---src-pages-blog-markdown-remark-frontmatter-slug-tsx-0440b4a9a578e5c22d73.js"/><link as="fetch" rel="preload" href="/page-data/blog/2017-07-27-web-application-primer-in-haskell-web-framework/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="container position-sticky z-index-sticky top-0"><div class="row"><div class="col-12"><nav class="navbar navbar-expand-lg blur blur-rounded position-absolute my-3 top-0 border-bottom py-3 z-index-3 shadow my-3 py-2 start-0 end-0 mx-4"><div class="container"><a class="navbar-brand" href="/"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:208px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;22&#x27; width=&#x27;208&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/b0331e26321805f83b732496be5ab076/b012d/testasoftware-lambda-med.webp 52w,/static/b0331e26321805f83b732496be5ab076/b9aeb/testasoftware-lambda-med.webp 104w,/static/b0331e26321805f83b732496be5ab076/13c7b/testasoftware-lambda-med.webp 208w" sizes="(min-width: 208px) 208px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 208px) 208px, 100vw" decoding="async" loading="lazy" data-src="/static/b0331e26321805f83b732496be5ab076/fb88f/testasoftware-lambda-med.png" data-srcset="/static/b0331e26321805f83b732496be5ab076/2a2cd/testasoftware-lambda-med.png 52w,/static/b0331e26321805f83b732496be5ab076/6d067/testasoftware-lambda-med.png 104w,/static/b0331e26321805f83b732496be5ab076/fb88f/testasoftware-lambda-med.png 208w" alt="Testa Software"/></picture><noscript><picture><source type="image/webp" srcSet="/static/b0331e26321805f83b732496be5ab076/b012d/testasoftware-lambda-med.webp 52w,/static/b0331e26321805f83b732496be5ab076/b9aeb/testasoftware-lambda-med.webp 104w,/static/b0331e26321805f83b732496be5ab076/13c7b/testasoftware-lambda-med.webp 208w" sizes="(min-width: 208px) 208px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 208px) 208px, 100vw" decoding="async" loading="lazy" src="/static/b0331e26321805f83b732496be5ab076/fb88f/testasoftware-lambda-med.png" srcSet="/static/b0331e26321805f83b732496be5ab076/2a2cd/testasoftware-lambda-med.png 52w,/static/b0331e26321805f83b732496be5ab076/6d067/testasoftware-lambda-med.png 104w,/static/b0331e26321805f83b732496be5ab076/fb88f/testasoftware-lambda-med.png 208w" alt="Testa Software"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div></a><button class="navbar-toggler shadow-none ms-2" type="button" data-bs-toggle="collapse" data-bs-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon mt-2"><span class="navbar-toggler-bar bar1"></span><span class="navbar-toggler-bar bar2"></span><span class="navbar-toggler-bar bar3"></span></span></button><div class="collapse navbar-collapse w-100 pt-3 pb-2 py-lg-0" id="navigation"><ul class="navbar-nav navbar-nav-hover mx-auto"><li class="nav-item mx-2"><a class="nav-link ps-2 d-flex justify-content-between cursor-pointer align-items-center" href="/about">About</a></li><li class="nav-item mx-2"><a class="nav-link ps-2 d-flex justify-content-between cursor-pointer align-items-center" href="/resume">Resume</a></li><li class="nav-item mx-2"><a class="nav-link ps-2 d-flex justify-content-between cursor-pointer align-items-center" href="/blog">Blog</a></li><li class="nav-item mx-2"><a class="nav-link ps-2 d-flex justify-content-between cursor-pointer align-items-center" href="https://github.com/stesta">GitHub</a></li></ul></div></div></nav></div></div></div><header><div class="page-header min-vh-100"><div class="oblique position-absolute top-0 h-100 d-md-block d-none"><div class="oblique-image bg-cover position-absolute fixed-top ms-auto h-100 z-index-0 ms-n6" style="background-image:url(/assets/images/blog/thumbnails/haskell.png)"></div></div><div class="container"><div class="row"><div class="col-lg-6 col-md-7 d-flex justify-content-center flex-column"><h1 class="text-gradient text-primary">Web Application Primer in Haskell - Web Framework</h1><p class="mb-4"></p><p class="lead pe-5 me-5">July 27, 2017<!-- --> - Steve Testa</p></div></div></div></div></header><section class="py-5"><div class="container"><div class="row"><div class="col-lg-9 mx-auto"><div class="blog-post-content"><p>There are plenty of choices when it comes to Haskell web frameworks: yesod, spock, snap, happstack - just to name a few.<!--more--> The <a href="https://wiki.haskell.org/Web/Frameworks">Haskell Wiki</a> provides a list of descriptions and differences between some of the web frameworks out there.</p>
<ul>
<li>Heroku
<ul>
<li>Docker
<ul>
<li>React + ES6</li>
<li><strong>Snap Framework + Heist + Websockets</strong></li>
<li><a href="/blog/2017-07-03-web-application-primer-in-haskell-programming-language">Haskell</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2>Web Framework: Snap Framework</h2>
<p>I spent a little bit of time researching the various frameworks to determine if there was an outright favorite. Nope. It was a bit of a tough decision. I wanted a framework that was easy to get up and running quickly and would be extensible enough for future projects. Yesod seemed like a great option, but they lost me on the <a href="https://www.yesodweb.com/book/shakespearean-templates">Shakespearean Template Languages</a>. That particular flavor of templating just isn't for me. Maybe I'll change my mind in the future. I suggest you decide for yourself what works best for you and your situation.</p>
<p>Ultimately, I landed on the <a href="http://snapframework.com/">Snap Framework</a>. For me, the Snap felt lightweight enough to get up and running quickly without too much ceremony. Getting an HTTP server up and running along with some simple routing is a breeze. Additionally, Snap's templating system (Heist) felt very natural to me.</p>
<p>As far as extensibility goes, they have a concept of <a href="http://snapframework.com/snaplets">Snaplets</a>. Snaplets allow you to build self-contained bits of additional functionality. When it comes time to add in things like sessions and authentication you can do so easily via built-in Snaplets (or write your own). Third-party Snaplets seemed readily available and easy to find.</p>
<p>On to the code!</p>
<h3>Setting up a Basic HTTP Server</h3>
<p>For the basic Snap site setup I have chosen to break things out into three files in order to have a clear separation of concerns. To be fair I saw this convention somewhere... liked it... and subsequently ripped it off! :)</p>
<p>The three files summarize as follows:</p>
<p><strong>Main.hs</strong></p>
<p>The entry point for our application is very simple. All we're doing here is serving up our website via the <code class="language-text">serveSnaplet</code> function which takes in a server configuration and a snaplet initializer. For the server configuration we're just using the <code class="language-text">defaultConfig</code>. The snaplet initializer (<code class="language-text">siteInit</code>) is defined a little further below.</p>
<div class="gatsby-highlight" data-language="haskell"><pre style="counter-reset: linenumber NaN" class="language-haskell line-numbers"><code class="language-haskell"><span class="token hvariable">main</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token hvariable">serveSnaplet</span> <span class="token hvariable">defaultConfig</span> <span class="token hvariable">siteInit</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<p><strong>Application.hs</strong></p>
<p>This file defines a data structure we can use to hold the state for our application. The App data structure will contain the state of all the snaplets we intend to user and in-turn wrap them all up as a Snaplet. Note that I don't understand the technical reasons, but the field names all need to begin with an underscore. Following that up with the <code class="language-text">makeLenses</code> helper lets us call those field names <em>without</em> an underscore throughout the rest of our application.</p>
<div class="gatsby-highlight" data-language="haskell"><pre style="counter-reset: linenumber NaN" class="language-haskell line-numbers"><code class="language-haskell"><span class="token keyword">data</span> <span class="token constant">App</span> <span class="token operator">=</span> <span class="token constant">App</span>
    <span class="token punctuation">{</span> <span class="token hvariable">_heist</span> <span class="token operator">::</span> <span class="token constant">Snaplet</span> <span class="token punctuation">(</span><span class="token constant">Heist</span> <span class="token constant">App</span><span class="token punctuation">)</span> 
    <span class="token punctuation">}</span>

<span class="token hvariable">makeLenses</span> ''<span class="token constant">App</span>

<span class="token keyword">instance</span> <span class="token constant">HasHeist</span> <span class="token constant">App</span> <span class="token keyword">where</span>
    <span class="token hvariable">heistLens</span> <span class="token operator">=</span> <span class="token hvariable">subSnaplet</span> <span class="token hvariable">heist</span>

<span class="token keyword">type</span> <span class="token constant">AppHandler</span> <span class="token operator">=</span> <span class="token constant">Handler</span> <span class="token constant">App</span> <span class="token constant">App</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>The Application.hs is also where we've instanced out Heist and added a convenience type synonym called <code class="language-text">AppHandler</code>.</p>
<p><strong>Site.hs</strong></p>
<p>Finally, we define a Site.hs to house our Snaplet initializer to initialize our site. When making this top level Snaplet the first the we end up doing is to initialize all of the nested Snaplets our site will use. In this case we're only initializing the Heist Snaplet for templating. Then there's some basic routing. Finally, a return of the resulting <code class="language-text">App</code> state data structure.</p>
<div class="gatsby-highlight" data-language="haskell"><pre style="counter-reset: linenumber NaN" class="language-haskell line-numbers"><code class="language-haskell"><span class="token hvariable">siteInit</span> <span class="token operator">::</span> <span class="token constant">SnapletInit</span> <span class="token constant">App</span> <span class="token constant">App</span>
<span class="token hvariable">siteInit</span> <span class="token operator">=</span> <span class="token hvariable">makeSnaplet</span> <span class="token string">"app"</span> <span class="token string">"An snaplet example application."</span> <span class="token constant">Nothing</span> <span class="token operator">$</span> <span class="token keyword">do</span>
    <span class="token hvariable">h</span> <span class="token operator">&lt;-</span> <span class="token hvariable">nestSnaplet</span> <span class="token string">""</span> <span class="token hvariable">heist</span> <span class="token operator">$</span> <span class="token hvariable">heistInit</span> <span class="token string">"templates"</span>
    <span class="token hvariable">addRoutes</span> <span class="token punctuation">[</span> <span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token hvariable">render</span> <span class="token string">"index.tpl"</span><span class="token punctuation">)</span>
              <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">"gameoflife"</span><span class="token punctuation">,</span> <span class="token hvariable">gameOfLife</span><span class="token punctuation">)</span>
              <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">"/scripts"</span><span class="token punctuation">,</span> <span class="token hvariable">serveDirectory</span> <span class="token string">"assets/scripts"</span><span class="token punctuation">)</span>
              <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">"/styles"</span><span class="token punctuation">,</span> <span class="token hvariable">serveDirectory</span> <span class="token string">"assets/styles"</span><span class="token punctuation">)</span>
              <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token hvariable">render</span> <span class="token string">"404.tpl"</span><span class="token punctuation">)</span>
              <span class="token punctuation">]</span>
    <span class="token builtin">return</span> <span class="token operator">$</span> <span class="token constant">App</span> <span class="token hvariable">h</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h3>Setting up Websockets</h3>
<p>I could have used REST here. It is easy to create an REST API as a Snaplet. For the purposes for the Game of Haskell, however, I needed (wanted) something a little more real-time.</p>
<p>Websockets are the no-brainer client-server communication protocol for the web. Packages are available to add websocket support in for Haskell as well as a corresponding Snaplet to plug in to our application.</p>
<p>If you review our site initializer you will find the <code class="language-text">gameoflife</code> route. It points to an <code class="language-text">AppHandler</code>. The handler runs a web socket <code class="language-text">ServerApp</code>. The server app continually listens for new messages, expecting an integer to be sent across the wire, and returns the corresponding game state. The game state itself is packaged up as JSON using the <a href="https://github.com/haskell/aeson">aeson</a> Haskell library.</p>
<div class="gatsby-highlight" data-language="haskell"><pre style="counter-reset: linenumber NaN" class="language-haskell line-numbers"><code class="language-haskell"><span class="token comment">-- | Game of Life handler</span>
<span class="token operator">--------------------------------------------------------------------------------</span>
<span class="token hvariable">gameOfLife</span> <span class="token operator">::</span> <span class="token constant">AppHandler</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token hvariable">gameOfLife</span> <span class="token operator">=</span> <span class="token hvariable">WS<span class="token punctuation">.</span>runWebSocketsSnap</span> <span class="token hvariable">gameOfLifeApp</span> 


<span class="token comment">-- | Game of Life server app</span>
<span class="token comment">-- set an initial board state and continually listen for</span>
<span class="token comment">-- the next msg::Int (corresponds to a board generation #) </span>
<span class="token comment">-- sends back to the client the requested board via JSON array</span>
<span class="token operator">--------------------------------------------------------------------------------</span>
<span class="token hvariable">gameOfLifeApp</span> <span class="token operator">::</span> <span class="token constant">WS<span class="token punctuation">.</span>ServerApp</span>
<span class="token hvariable">gameOfLifeApp</span> <span class="token hvariable">pending</span> <span class="token operator">=</span> <span class="token keyword">do</span> 
    <span class="token hvariable">conn</span> <span class="token operator">&lt;-</span> <span class="token hvariable">WS<span class="token punctuation">.</span>acceptRequest</span> <span class="token hvariable">pending</span>
    <span class="token keyword">let</span> <span class="token hvariable">game</span> <span class="token operator">=</span> <span class="token hvariable">evalState</span> <span class="token hvariable">generations</span> <span class="token hvariable">acorn</span>
    <span class="token hvariable">forever</span> <span class="token operator">$</span> <span class="token keyword">do</span>
        <span class="token hvariable">msg</span> <span class="token operator">&lt;-</span> <span class="token hvariable">WS<span class="token punctuation">.</span>receiveData</span> <span class="token hvariable">conn</span>
        <span class="token keyword">let</span> <span class="token hvariable">g</span> <span class="token operator">=</span> <span class="token builtin">read</span> <span class="token operator">$</span> <span class="token hvariable">T<span class="token punctuation">.</span>unpack</span> <span class="token hvariable">msg</span> <span class="token operator">::</span> <span class="token constant">Int</span>
        <span class="token hvariable">WS<span class="token punctuation">.</span>sendTextData</span> <span class="token hvariable">conn</span> <span class="token operator">$</span> <span class="token hvariable">encode</span> <span class="token operator">$</span> <span class="token hvariable">game</span><span class="token operator">!!</span><span class="token hvariable">g</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h3>Templating via Heist</h3>
<p>For webpage and HTML templating <a href="http://snapframework.com/docs/tutorials/heist">Heist</a> was a natural choice because it was developed by the same folks who wrote Snap and you get it bundled for free. Heist as a template engine was a selling point for me regarding Snap. The <code class="language-text">bind</code> and <code class="language-text">apply-content</code> features make it possible to build a series of nested templates. When you couple all of that with <code class="language-text">splices</code>, which basically let you call Haskell code from your templates, you have a really powerful system.</p></div></div></div></div></section><section class="py-5"><div class="container"><div class="row"><div class="col-lg-9 mx-auto"><div id="disqus_thread"></div></div></div></div></section><footer class="footer pb-5 pt-5"><hr class="horizontal dark mb-5"/><div class="container"><div class="row"><div class="col-lg-3 text-lg-start text-center mb-lg-0 mb-3"><a class="navbar-brand" href="/"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:208px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;22&#x27; width=&#x27;208&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/b0331e26321805f83b732496be5ab076/b012d/testasoftware-lambda-med.webp 52w,/static/b0331e26321805f83b732496be5ab076/b9aeb/testasoftware-lambda-med.webp 104w,/static/b0331e26321805f83b732496be5ab076/13c7b/testasoftware-lambda-med.webp 208w" sizes="(min-width: 208px) 208px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 208px) 208px, 100vw" decoding="async" loading="lazy" data-src="/static/b0331e26321805f83b732496be5ab076/fb88f/testasoftware-lambda-med.png" data-srcset="/static/b0331e26321805f83b732496be5ab076/2a2cd/testasoftware-lambda-med.png 52w,/static/b0331e26321805f83b732496be5ab076/6d067/testasoftware-lambda-med.png 104w,/static/b0331e26321805f83b732496be5ab076/fb88f/testasoftware-lambda-med.png 208w" alt="Testa Software"/></picture><noscript><picture><source type="image/webp" srcSet="/static/b0331e26321805f83b732496be5ab076/b012d/testasoftware-lambda-med.webp 52w,/static/b0331e26321805f83b732496be5ab076/b9aeb/testasoftware-lambda-med.webp 104w,/static/b0331e26321805f83b732496be5ab076/13c7b/testasoftware-lambda-med.webp 208w" sizes="(min-width: 208px) 208px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 208px) 208px, 100vw" decoding="async" loading="lazy" src="/static/b0331e26321805f83b732496be5ab076/fb88f/testasoftware-lambda-med.png" srcSet="/static/b0331e26321805f83b732496be5ab076/2a2cd/testasoftware-lambda-med.png 52w,/static/b0331e26321805f83b732496be5ab076/6d067/testasoftware-lambda-med.png 104w,/static/b0331e26321805f83b732496be5ab076/fb88f/testasoftware-lambda-med.png 208w" alt="Testa Software"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div></a></div><div class="col-lg-6 text-center mb-lg-0 mb-5"><ul class="nav flex-row align-items-center mb-5 mt-sm-0 justify-content-center"><li class="nav-item"><a class="nav-link" href="/">Home</a></li><li class="nav-item"><a class="nav-link" href="/about">About</a></li><li class="nav-item"><a class="nav-link" href="/resume">Resume</a></li><li class="nav-item"><a class="nav-link" href="/blog">Blog</a></li></ul><p class="mb-0">© <!-- -->2021<!-- --> Testa Software</p></div><div class="col-lg-3 text-lg-end text-center"><a href="https://github.com/stesta" class="text-secondary me-xl-4 me-4"><span class="fab fa-github text-lg"></span></a><a href="https://twitter.com/steven_testa" class="text-secondary me-xl-4 me-4"><span class="fab fa-twitter text-lg"></span></a><a href="https://www.linkedin.com/in/stevendtesta/" class="text-secondary me-xl-4 me-4"><span class="fab fa-linkedin text-lg"></span></a></div></div></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script src="/assets/js/core/popper.min.js" type="text/javascript"></script><script src="/assets/js/core/bootstrap.min.js" type="text/javascript"></script><script src="/assets/js/plugins/perfect-scrollbar.min.js"></script><script src="/assets/js/plugins/typedjs.js"></script><script src="/assets/js/plugins/countup.min.js"></script><script src="/assets/js/plugins/rellax.min.js"></script><script src="/assets/js/plugins/tilt.min.js"></script><script src="/assets/js/plugins/choices.min.js"></script><script src="/assets/js/plugins/parallax.min.js"></script><script src="/assets/js/plugins/nouislider.min.js" type="text/javascript"></script><script src="/assets/js/plugins/glidejs.min.js" type="text/javascript"></script><script src="/assets/js/plugins/anime.min.js" type="text/javascript"></script><script src="/assets/js/plugins/chartjs.min.js"></script><script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDTTfWur0PDbZWPr7Pmq8K3jiDp0_xUziI"></script><script src="/assets/js/soft-design-system-pro.min.js?v=1.0.8" type="text/javascript"></script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2017-07-27-web-application-primer-in-haskell-web-framework/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-38d962f9f91f516d05f6.js"],"app":["/app-f6dc7fc2ed935f7049e2.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-79a0623669fdf96533e2.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-0dcbcf044333a8a2bd15.js"],"component---src-pages-blog-index-tsx":["/component---src-pages-blog-index-tsx-37731643f0b20cd85361.js"],"component---src-pages-blog-markdown-remark-frontmatter-slug-tsx":["/component---src-pages-blog-markdown-remark-frontmatter-slug-tsx-0440b4a9a578e5c22d73.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-5585a884c86879feada2.js"],"component---src-pages-resume-tsx":["/component---src-pages-resume-tsx-9fb0904ab0e5e7d95839.js"],"component---src-pages-services-tsx":["/component---src-pages-services-tsx-3a7ea9be71e9ad297d4e.js"]};/*]]>*/</script><script src="/polyfill-38d962f9f91f516d05f6.js" nomodule=""></script><script src="/component---src-pages-blog-markdown-remark-frontmatter-slug-tsx-0440b4a9a578e5c22d73.js" async=""></script><script src="/commons-ebc20530bca262809144.js" async=""></script><script src="/app-f6dc7fc2ed935f7049e2.js" async=""></script><script src="/framework-8cd75372ec3f541c8f95.js" async=""></script><script src="/webpack-runtime-27cf0a40f8417dc113b4.js" async=""></script></body></html>